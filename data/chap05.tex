
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:

\chapter{硬件资源共享管理方法}
\label{chap:hwresman}

% 现有体系结构共享性能很差
由于缺少有效的硬件资源共享管理机制，现有服务器体系结构不能很好的在共享场景中工作。
不同应用无管理的访问共享硬件资源，产生资源竞争并造成严重的性能干扰，进而影响应用性能，
来自Intel的研究\cite{intel}表明在共享末级缓存上的资源竞争最多可造成30\%的性能干扰。
% 而现实需求又需要共享
随着计算机硬件技术不断发展，现在计算机所能提供的硬件资源不断增加，
单个应用很难充分利用全部硬件资源；
与此同时，云计算与移动互联网的发展与普及，应用的数量也在飞速增加。
通过虚拟化与容器等技术将不同应用运行在同一台服务器，提高服务器资源利用率，
应用共享硬件资源成为常态。
% 资源利用率与服务质量相冲突
%但应用服务质量与服务器资源率之间存在冲突，
在这种场景下为了保障延迟敏感型应用的性能不受影响，
这些延迟敏感型应用需要独占部分共享资源（如部署在单独的服务器\cite{}），
这造成数据中心服务器的资源利用率通常只有10\%-12\%。
如何为硬件资源提供灵活的共享管理方法，是解决服务器多应用共享的关键问题。


% 问题一：资源竞争点不断变化，需要统一的管理接口，control plane + ?PRM?
现有一些研究工作在单一硬件资源上提出共享管理的方法，
如在共享末级缓存上提出容量划分的方法\cite{}，
在内存控制器上提供请求调度的方法\cite{}，
Intel在其Xeon E5v3系列处理器中增加了末级缓存容量划分功能。
但是计算机内包含大量的共享硬件资源，不同应用混合后，会在不同的硬件上资源上产生竞争；
同时由于硬件资源之间存在关联，需要协调管理。
例如仅通过容量划分的方式解决在共享缓存中的资源竞争，
可能会造成在竞争点转移到内存控制器，这是由于
因此，为所有的硬件资源提供统一的共享管理接口，
并集中式的管理节点内的全部共享资源是必要的。


%
要实现硬件资源的共享管理，首先需要考虑如何监控资源用量，以及实时反馈。 % stab+ttab

对于硬件，如何实现干扰隔离。 % cp_proc

本文提出一种通用的硬件控制平面方法，为共享硬件资源提供共享资源管理的功能，具体包括:
基于表的资源管理抽象，实时性能监控与反馈，资源调整机制，可编程数据平面处理器。
与之前工作的主要区别是，（1）统一的资源抽象，而不是为单独某一个硬件资源；
（2）基于硬件的实时资源监控（3）

XXXX

xxx

XXXX

本章主要
%In this chapter I focus on the failure recovery, metadata I/O efficiency, and adaptability
%implications of the combined approach to metadata storage, journaling, and workload
%distribution and relate my experiences constructing a working implementation. I analyze a
%variety of static file system snapshots and workload traces to motivate MDS design and performance
%analysis, present a simulation based-analysis of metadata partitioning approaches to
%demonstrate the architectural advantages of a dynamic subtree-based approach, and evaluate
%my implementation under a range of micro-benchmarks, workload traces, and failure scenarios.


%这种多应用共享的使用方式在现有的服务器架构下会造成应用之间严重的干扰。
%为了防止这些硬件层次的干扰对延迟敏感型应用的性能造成影响，
%通常不会允许其它应用与延迟敏感型应用共享服务器资源，
%造成很低的服务器资源利用率。


\section{背景与相关工作}


\section{硬件资源抽象}


\section{控制平面设计}

\subsection{实时资源监控与反馈}

\subsection{资源调整机制}

\subsection{控制平面微体系结构设计}

\subsection{控制平面示例}

\subsubsection{内存控制器控制平面}

\subsubsection{共享末级缓存控制平面}


\section{可编程数据平面设计}


\section{小结}

